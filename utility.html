



<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Utilities &mdash; tk-multi-publish2 v2.6.5 documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="./" src="_static/documentation_options.js"></script>
        <script type="text/javascript" src="_static/jquery.js"></script>
        <script type="text/javascript" src="_static/underscore.js"></script>
        <script type="text/javascript" src="_static/doctools.js"></script>
        <script type="text/javascript" src="_static/language_data.js"></script>
    
    <script type="text/javascript" src="_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="App Interface" href="application.html" />
    <link rel="prev" title="Logging" href="logging.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          
    <a href='http://developer.shotgridsoftware.com'>
    
        <img style='width: 191px;
                height: 60px;
                margin: 2px;
                border-radius: 0px;
                padding: 0px;'
            src='_static/logo@2x.png'/>
    
    </a>
    

          
            <a href="index.html" class="icon icon-home"> tk-multi-publish2
          

          
          </a>

          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          

        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
    
            
            
              
            
            
              <ul class="current">
<li class="toctree-l1"><a class="reference internal" href="customizing.html">Publish Customization</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Publish API</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1 current"><a class="current reference internal" href="#">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="application.html">App Interface</a></li>
</ul>

            
          

    <a href='genindex.html'>Alphabetic Index</a>

    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px;
                color: #b3b3b3;
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>
    <style>
        a.custom_post_menu { display: inline;
                             padding: 0px;
                             text-decoration: underline; }
    </style>

    <b>tk-multi-publish2</b> v2.6.5.<br>
    
        This documentation is part of the ShotGrid Pipeline Toolkit.
    
    For more information, please visit
    <a class=custom_post_menu href='https://developer.shotgridsoftware.com'>The ShotGrid developer portal.</a>.
    The code associated with this documentation can be found
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/tk-multi-publish2'>here</a>.

    </div>
    <style>
        p.privacy_links { margin: 4px 0px;}
    </style>
    <p class="privacy_links"><a data-opt-in-preferences href="javascript:;">Privacy settings</a></p>
    <p class="privacy_links"><a data-wat-linkname="manage-ccpa-settings-footer-link" href="javascript:;">Do not sell my personal information</a></p>
    <p class="privacy_links"><a href="https://www.autodesk.com/company/legal-notices-trademarks/privacy-statement">Privacy/Cookies</a></p>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tk-multi-publish2</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="index.html">Docs</a> &raquo;</li>
        
      <li>Utilities</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="utilities">
<h1>Utilities<a class="headerlink" href="#utilities" title="Permalink to this headline">¶</a></h1>
<p>The publisher provides some utility methods that are generally useful for
writing publish plugins that aren’t driven by templates. These methods are used
by the basic Shotgun integration to infer information from file paths when
templates are not available. This includes version and frame number
identification, publish display name, image sequence paths, etc.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p class="last">These utility methods are exposed via the publisher’s <code class="docutils literal notranslate"><span class="pre">util</span></code> module,
but the implementation for most of them lives within the app’s <code class="docutils literal notranslate"><span class="pre">path_info</span></code>
hook. Studios can override these path processing methods to account for their
own naming conventions and path structures.</p>
</div>
<p>The utilty method are documented below:</p>
<span class="target" id="module-tk_multi_publish2.util"></span><dl class="function">
<dt id="tk_multi_publish2.util.get_version_path">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_version_path</code><span class="sig-paren">(</span><em>path</em>, <em>version</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_version_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_version_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path without a version number, return the path with the supplied
version number.</p>
<p>If a version number is detected in the supplied path, the path will be
returned as-is.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> – The path to inject a version number.</li>
<li><strong>version</strong> – The version number to inject.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The modified path with the supplied version number inserted.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tk_multi_publish2.util.get_next_version_path">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_next_version_path</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_next_version_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_next_version_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a file path, return a path to the next version.</p>
<p>This is typically used by auto-versioning logic in plugins that need to
save the current work file to the next version number.</p>
<p>If no version can be identified in the supplied path, <code class="docutils literal notranslate"><span class="pre">None</span></code> will be
returned, indicating that the next version path can’t be determined.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> – The path to a file, likely one to be published.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The path to the next version of the supplied path.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tk_multi_publish2.util.get_file_path_components">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_file_path_components</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_file_path_components"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_file_path_components" title="Permalink to this definition">¶</a></dt>
<dd><p>Convenience method for determining file components for a given path.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> (<a class="reference external" href="https://docs.python.org/2/library/functions.html#str" title="(in Python v2.7)"><em>str</em></a>) – The path to the file to componentize.</td>
</tr>
</tbody>
</table>
<p>Returns file path components in the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="c1"># path=&quot;/path/to/the/file/my_file.v001.ext&quot;</span>

<span class="p">{</span>
    <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/the/file/my_file.v001.ext&quot;</span><span class="p">,</span>
    <span class="s2">&quot;folder&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/the/file&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;my_file.v001.ext&quot;</span><span class="p">,</span>
    <span class="s2">&quot;extension&quot;</span><span class="p">:</span> <span class="s2">&quot;ext&quot;</span><span class="p">,</span>
<span class="p">}</span>

<span class="c1"># path=&quot;/path/to/the/folder&quot;</span>

<span class="p">{</span>
    <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/the/folder&quot;</span><span class="p">,</span>
    <span class="s2">&quot;folder&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/the&quot;</span> <span class="p">,</span>
    <span class="s2">&quot;filename&quot;</span><span class="p">:</span> <span class="s2">&quot;folder&quot;</span><span class="p">,</span>
    <span class="s2">&quot;extension&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
</dd></dl>

<dl class="function">
<dt id="tk_multi_publish2.util.get_frame_sequence_path">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_frame_sequence_path</code><span class="sig-paren">(</span><em>path</em>, <em>frame_spec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_frame_sequence_path"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_frame_sequence_path" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a path with a frame number, return the sequence path where the frame
number is replaced with a given frame specification such as <code class="docutils literal notranslate"><span class="pre">{FRAME}</span></code> or
<code class="docutils literal notranslate"><span class="pre">%04d</span></code> or <code class="docutils literal notranslate"><span class="pre">$F</span></code>.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> – The input path with a frame number</li>
<li><strong>frame_spec</strong> – The frame specification to replace the frame number with.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">The full frame sequence path</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tk_multi_publish2.util.get_frame_sequences">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_frame_sequences</code><span class="sig-paren">(</span><em>folder</em>, <em>extensions=None</em>, <em>frame_spec=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_frame_sequences"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_frame_sequences" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a folder, inspect the contained files to find what appear to be
files with frame numbers.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>folder</strong> – The path to a folder potentially containing a sequence of
files.</li>
<li><strong>extensions</strong> – A list of file extensions to retrieve paths for.
If not supplied, the extension will be ignored.</li>
<li><strong>frame_spec</strong> – A string to use to represent the frame number in the
return sequence path.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last"><p>A list of tuples for each identified frame sequence. The first
item in the tuple is a sequence path with the frame number replaced
with the supplied frame specification. If no frame spec is supplied,
a python string format spec will be returned with the padding found
in the file.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">get_frame_sequences</span><span class="p">(</span>
    <span class="s2">&quot;/path/to/the/folder&quot;</span><span class="p">,</span>
    <span class="p">[</span><span class="s2">&quot;exr&quot;</span><span class="p">,</span> <span class="s2">&quot;jpg&quot;</span><span class="p">],</span>
    <span class="n">frame_spec</span><span class="o">=</span><span class="s2">&quot;</span><span class="si">{FRAME}</span><span class="s2">&quot;</span>
<span class="p">)</span>

<span class="p">[</span>
    <span class="p">(</span>
        <span class="s2">&quot;/path/to/the/supplied/folder/key_light1.</span><span class="si">{FRAME}</span><span class="s2">.exr&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="o">&lt;</span><span class="n">frame_1_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">frame_2_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">),</span>
    <span class="p">(</span>
        <span class="s2">&quot;/path/to/the/supplied/folder/fill_light1.</span><span class="si">{FRAME}</span><span class="s2">.jpg&quot;</span><span class="p">,</span>
        <span class="p">[</span><span class="o">&lt;</span><span class="n">frame_1_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">&lt;</span><span class="n">frame_2_path</span><span class="o">&gt;</span><span class="p">,</span> <span class="o">...</span><span class="p">]</span>
    <span class="p">)</span>
<span class="p">]</span>
</pre></div>
</div>
</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tk_multi_publish2.util.get_publish_name">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_publish_name</code><span class="sig-paren">(</span><em>path</em>, <em>sequence=False</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_publish_name"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_publish_name" title="Permalink to this definition">¶</a></dt>
<dd><p>Given a file path, return the display name to use for publishing.</p>
<p>Typically, this is a name where the path and any version number are removed
in order to keep the publish name consistent as subsequent versions are
published.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ow">in</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="n">my_file</span><span class="o">.</span><span class="n">v001</span><span class="o">.</span><span class="n">jpg</span>
<span class="n">out</span><span class="p">:</span> <span class="n">my_file</span><span class="o">.</span><span class="n">jpg</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>path</strong> – The path to a file, likely one to be published.</li>
<li><strong>sequence</strong> – If True, treat the path as a sequence name and replace
the frame number with placeholder</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first last">A publish display name for the provided path.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="tk_multi_publish2.util.get_version_number">
<code class="descclassname">tk_multi_publish2.util.</code><code class="descname">get_version_number</code><span class="sig-paren">(</span><em>path</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/util.html#get_version_number"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#tk_multi_publish2.util.get_version_number" title="Permalink to this definition">¶</a></dt>
<dd><p>Extract a version number from the supplied path.</p>
<p>This is used by plugins that need to know what version number to associate
with the file when publishing.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="ow">in</span><span class="p">:</span> <span class="o">/</span><span class="n">path</span><span class="o">/</span><span class="n">to</span><span class="o">/</span><span class="n">the</span><span class="o">/</span><span class="n">file</span><span class="o">/</span><span class="n">my_file</span><span class="o">.</span><span class="n">v001</span><span class="o">.</span><span class="n">jpg</span>
<span class="n">out</span><span class="p">:</span> <span class="mi">1</span>
</pre></div>
</div>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>path</strong> – The path to a file, likely one to be published.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">An integer representing the version number in the supplied path.
If no version found, <code class="docutils literal notranslate"><span class="pre">None</span></code> will be returned.</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="application.html" class="btn btn-neutral float-right" title="App Interface" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="logging.html" class="btn btn-neutral float-left" title="Logging" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2023, Autodesk

    </p>
  </div> 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
  
 

  <script type="text/javascript">
    window.wafCCPAForceShow = true;
    (function(a,b,c,d){
      a='https://tags.tiqcdn.com/utag/autodesk/micro-basic/prod/utag.js';
      b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
      a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
    })();
  </script>


</body>
</html>