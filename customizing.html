

<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
  <meta charset="utf-8" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Publish Customization &mdash; tk-multi-publish2 v2.10.0 documentation</title>
      <link rel="stylesheet" href="_static/pygments.css" type="text/css" />
      <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
      <link rel="stylesheet" href="_static/graphviz.css" type="text/css" />
  <!--[if lt IE 9]>
    <script src="_static/js/html5shiv.min.js"></script>
  <![endif]-->
  
        <script src="_static/jquery.js"></script>
        <script src="_static/_sphinx_javascript_frameworks_compat.js"></script>
        <script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
        <script src="_static/doctools.js"></script>
        <script src="_static/sphinx_highlight.js"></script>
    <script src="_static/js/theme.js"></script>
    <link rel="index" title="Index" href="genindex.html" />
    <link rel="search" title="Search" href="search.html" />
    <link rel="next" title="Publish API" href="api.html" />
    <link rel="prev" title="Flow Production Tracking Publisher API reference, v2.10.0" href="index.html" /> 
</head>

<body class="wy-body-for-nav"> 
  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
    <a href='https://help.autodesk.com/view/SGDEV/ENU/'>
    
        <img style='width: 191px;
                height: 60px;
                margin: 2px;
                border-radius: 0px;
                padding: 0px;'
            src='_static/logo@2x.png'/>
    
    </a>
    

          
          
          <a href="index.html" class="icon icon-home">
            tk-multi-publish2
          </a>
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" aria-label="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

        </div><div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
    
              <ul class="current">
<li class="toctree-l1 current"><a class="current reference internal" href="#">Publish Customization</a><ul>
<li class="toctree-l2"><a class="reference internal" href="#collector-hook">Collector Hook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#collector-hook-api">Collector Hook API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tk_multi_publish2.base_hooks.CollectorPlugin"><code class="docutils literal notranslate"><span class="pre">CollectorPlugin</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#publish-plugin">Publish Plugin</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#step-by-step-tutorials">Step-by-Step Tutorials</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#create-a-publish-plugin">Create a Publish Plugin</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="#publish-plugin-api">Publish Plugin API</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin"><code class="docutils literal notranslate"><span class="pre">PublishPlugin</span></code></a></li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="#post-phase-hook">Post Phase Hook</a><ul>
<li class="toctree-l3"><a class="reference internal" href="#tk_multi_publish2.base_hooks.PostPhaseHook"><code class="docutils literal notranslate"><span class="pre">PostPhaseHook</span></code></a><ul>
<li class="toctree-l4"><a class="reference internal" href="#tk_multi_publish2.base_hooks.PostPhaseHook.post_validate"><code class="docutils literal notranslate"><span class="pre">PostPhaseHook.post_validate()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tk_multi_publish2.base_hooks.PostPhaseHook.post_publish"><code class="docutils literal notranslate"><span class="pre">PostPhaseHook.post_publish()</span></code></a></li>
<li class="toctree-l4"><a class="reference internal" href="#tk_multi_publish2.base_hooks.PostPhaseHook.post_finalize"><code class="docutils literal notranslate"><span class="pre">PostPhaseHook.post_finalize()</span></code></a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">Publish API</a></li>
<li class="toctree-l1"><a class="reference internal" href="logging.html">Logging</a></li>
<li class="toctree-l1"><a class="reference internal" href="utility.html">Utilities</a></li>
<li class="toctree-l1"><a class="reference internal" href="application.html">App Interface</a></li>
</ul>


    <a href='genindex.html'>Alphabetic Index</a>

    <div style='margin-top: 50px;
                margin-left: 10px;
                margin-right: 10px;
                padding: 10px;
                color: #b3b3b3;
                font-size: 70%;
                border-radius: 3px;
                background-color: #444;
                line-height: 18px;
                '>
    <style>
        a.custom_post_menu { display: inline;
                             padding: 0px;
                             text-decoration: underline; }
    </style>

    <b>tk-multi-publish2</b> v2.10.0.<br>
    
        This documentation is part of the Flow Production Tracking.
    
    For more information, please visit
    <a class=custom_post_menu href='https://help.autodesk.com/view/SGDEV/ENU/'>The Flow Production Tracking developer portal.</a>.
    The code associated with this documentation can be found
    <a class=custom_post_menu href='https://github.com/shotgunsoftware/tk-multi-publish2'>here</a>.

    </div>
    <style>
        p.privacy_links { margin: 4px 0px;}
    </style>
    <p class="privacy_links"><a data-opt-in-preferences href="javascript:;">Privacy settings</a></p>
    <p class="privacy_links"><a data-wat-linkname="manage-ccpa-settings-footer-link" href="javascript:;">Do not sell my personal information</a></p>
    <p class="privacy_links"><a href="https://www.autodesk.com/company/legal-notices-trademarks/privacy-statement">Privacy/Cookies</a></p>



        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap"><nav class="wy-nav-top" aria-label="Mobile navigation menu" >
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="index.html">tk-multi-publish2</a>
      </nav>

      <div class="wy-nav-content">
        <div class="rst-content">
          <div role="navigation" aria-label="Page navigation">
  <ul class="wy-breadcrumbs">
      <li><a href="index.html" class="icon icon-home" aria-label="Home"></a></li>
      <li class="breadcrumb-item active">Publish Customization</li>
      <li class="wy-breadcrumbs-aside">
      </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
             
  <section id="publish-customization">
<h1>Publish Customization<a class="headerlink" href="#publish-customization" title="Permalink to this heading"></a></h1>
<p>The sections below identify the entry points for customizing publish workflows.
For a broad overview of how publish execution works, see the
<a class="reference internal" href="index.html#publish-execution"><span class="std std-ref">Publish Execution</span></a> doc.</p>
<section id="collector-hook">
<span id="publish-collector"></span><h2>Collector Hook<a class="headerlink" href="#collector-hook" title="Permalink to this heading"></a></h2>
<p>The collector hook handles processing the current user’s session to identify
what will be published. It also handles processing any file paths that have been
dragged/dropped onto the Publisher or added manually via the
<a class="reference internal" href="api.html#publish-api"><span class="std std-ref">Publish API</span></a>. Once the collector identifies what is to be published,
<a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">Publish Item</span></a> instances are created within the tree
and presented to the user.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on how to take over, subclass, and manage hooks,
see the <a class="reference external" href="https://developers.shotgridsoftware.com/tk-core/core.html#sgtk-hook-docs" title="(in tk-core vv0.21.6)"><span class="xref std std-ref">Hooks</span></a> documentation.</p>
</div>
<hr class="docutils" />
<section id="collector-hook-api">
<h3>Collector Hook API<a class="headerlink" href="#collector-hook-api" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.CollectorPlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tk_multi_publish2.base_hooks.</span></span><span class="sig-name descname"><span class="pre">CollectorPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/collector.html#CollectorPlugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.CollectorPlugin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://developers.shotgridsoftware.com/tk-core/core.html#sgtk.Hook" title="(in tk-core vv0.21.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hook</span></code></a></p>
<p>This class defines the required interface for a collector plugin.
Collectors are used to gather individual files that are loaded via the
file browser or dragged and dropped into the Publish2 UI. It is also used
to gather items to be published within the current DCC session.</p>
<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.CollectorPlugin.id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.CollectorPlugin.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique string identifying this plugin.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.CollectorPlugin.settings">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.CollectorPlugin.settings" title="Permalink to this definition"></a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> defining the configuration interface for this collector.</p>
<p>The values configured for the collector will be supplied via settings
parameter in the <a class="reference internal" href="#tk_multi_publish2.base_hooks.CollectorPlugin.process_current_session" title="tk_multi_publish2.base_hooks.CollectorPlugin.process_current_session"><code class="xref py py-func docutils literal notranslate"><span class="pre">process_current_session()</span></code></a> and
<a class="reference internal" href="#tk_multi_publish2.base_hooks.CollectorPlugin.process_file" title="tk_multi_publish2.base_hooks.CollectorPlugin.process_file"><code class="xref py py-func docutils literal notranslate"><span class="pre">process_file()</span></code></a> methods.</p>
<p>The dictionary can include any number of settings required by the
collector, and takes the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="o">&lt;</span><span class="n">setting_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">default</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="p">},</span>
    <span class="o">&lt;</span><span class="n">setting_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">default</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="p">},</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The keys in the dictionary represent the names of the settings. The
values are a dictionary comprised of 3 additional key/value pairs.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: The type of the setting. This should correspond to one of
the data types that toolkit accepts for app and engine settings such
as <code class="docutils literal notranslate"><span class="pre">hook</span></code>, <code class="docutils literal notranslate"><span class="pre">template</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: The default value for the settings. This can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: A description of the setting as a string.</p></li>
</ul>
<p>Example implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;Work Template&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;template&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A work file template required by this collector.&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;Exclude Objects&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;list&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="p">[</span><span class="s2">&quot;obj1&quot;</span><span class="p">,</span> <span class="s2">&quot;obj2&quot;</span><span class="p">,</span> <span class="s2">&quot;obj3&quot;</span><span class="p">],</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;A list of objects to ignore.&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The settings are exposed via the <code class="docutils literal notranslate"><span class="pre">collector_settings</span></code> setting in the
app’s configuration. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">collector_settings</span><span class="p">:</span>
    <span class="n">Work</span> <span class="n">Template</span><span class="p">:</span> <span class="n">my_work_template</span>
    <span class="n">Exclude</span> <span class="n">Objects</span><span class="p">:</span> <span class="p">[</span><span class="n">obj1</span><span class="p">,</span> <span class="n">obj4</span><span class="p">]</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the hooks defined in the publisher app’s <code class="docutils literal notranslate"><span class="pre">hooks/</span></code> folder
for additional example implementations.</p>
</div>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.CollectorPlugin.process_current_session">
<span class="sig-name descname"><span class="pre">process_current_session</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/collector.html#CollectorPlugin.process_current_session"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.CollectorPlugin.process_current_session" title="Permalink to this definition"></a></dt>
<dd><p>This method analyzes the current engine session and creates a hierarchy
of items for publishing.</p>
<p>A typical implementation of this method would create an item that
represents the current session (e.g. the current Maya file) or all open
documents in a multi-document scenario (such as Photoshop). Top level
items area created as children of the supplied <code class="docutils literal notranslate"><span class="pre">parent_item</span></code>
(a <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance).</p>
<p>Any additional items, specific to the current session, can then be
created as children of the session item. This is not a requirement
however. You could, for example, create a flat list of items, all
sharing the same parent.</p>
<p>The image below shows a Maya scene item with a child item that
represents a playblast to be published. Each of these items has one or
more publish tasks attached to them.</p>
<img alt="_images/collected_session_item.png" src="_images/collected_session_item.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>The <code class="docutils literal notranslate"><span class="pre">settings</span></code> argument is a dictionary where the keys are the names
of the settings defined by the <a class="reference internal" href="#tk_multi_publish2.base_hooks.CollectorPlugin.settings" title="tk_multi_publish2.base_hooks.CollectorPlugin.settings"><code class="xref py py-func docutils literal notranslate"><span class="pre">settings()</span></code></a> property and the values
are <a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> instances as configured for this
instance of the publish app.</p>
<p>To create items within this method, use the
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.create_item" title="tk_multi_publish2.api.PublishItem.create_item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_item()</span></code></a> method available on the supplied
<code class="docutils literal notranslate"><span class="pre">parent_item</span></code>.</p>
<p>Example Maya implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_current_session</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">parent_item</span><span class="p">):</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sn</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="n">session_item</span> <span class="o">=</span> <span class="n">parent_item</span><span class="o">.</span><span class="n">create_item</span><span class="p">(</span>
        <span class="s2">&quot;maya.session&quot;</span><span class="p">,</span>
        <span class="s2">&quot;Maya Session&quot;</span><span class="p">,</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># additional work here to prep the session item such as defining</span>
    <span class="c1"># an icon, populating the properties dictionary, etc.</span>
    <span class="n">session_item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>

    <span class="c1"># collect additional file types, parented under the session</span>
    <span class="bp">self</span><span class="o">.</span><span class="n">_collect_geometry</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">session_item</span><span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the hooks defined in the publisher app’s <code class="docutils literal notranslate"><span class="pre">hooks/</span></code> folder
for additional example implementations.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – A dictionary of configured
<a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> objects for this collector.</p></li>
<li><p><strong>parent_item</strong> – The root <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance to
collect child items for.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.CollectorPlugin.process_file">
<span class="sig-name descname"><span class="pre">process_file</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">parent_item</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">path</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/collector.html#CollectorPlugin.process_file"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.CollectorPlugin.process_file" title="Permalink to this definition"></a></dt>
<dd><p>This method creates one or more items to publish for the supplied file
path.</p>
<p>The image below shows a collected text file item to be published.</p>
<img alt="_images/collected_file.png" src="_images/collected_file.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A typical implementation of this method involves processing the supplied
path to determine what type of file it is and how to display it before
creating the item to publish.</p>
<p>The <code class="docutils literal notranslate"><span class="pre">settings</span></code> argument is a dictionary where the keys are the names
of the settings defined by the <a class="reference internal" href="#tk_multi_publish2.base_hooks.CollectorPlugin.settings" title="tk_multi_publish2.base_hooks.CollectorPlugin.settings"><code class="xref py py-func docutils literal notranslate"><span class="pre">settings()</span></code></a> property and the values
are <a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> instances as
configured for this instance of the publish app.</p>
<p>To create items within this method, use the
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.create_item" title="tk_multi_publish2.api.PublishItem.create_item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_item()</span></code></a> method available on the supplied
<code class="docutils literal notranslate"><span class="pre">parent_item</span></code>.</p>
<p>Example implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">process_file</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">parent_item</span><span class="p">):</span>

    <span class="c1"># make sure the path is normalized. no trailing separator,</span>
    <span class="c1"># separators are appropriate for the current os, no double</span>
    <span class="c1"># separators, etc.</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">sgtk</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">ShotgunPath</span><span class="o">.</span><span class="n">normalize</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># do some processing of the file to determine its type, and how</span>
    <span class="c1"># to display it.</span>
    <span class="o">...</span>

    <span class="c1"># create and populate the item</span>
    <span class="n">file_item</span> <span class="o">=</span> <span class="n">parent_item</span><span class="o">.</span><span class="n">create_item</span><span class="p">(</span>
        <span class="n">item_type</span><span class="p">,</span>
        <span class="n">type_display</span><span class="p">,</span>
        <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">basename</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="p">)</span>

    <span class="c1"># additional work here to prep the session item such as defining</span>
    <span class="c1"># an icon, populating the properties dictionary, etc.</span>
    <span class="n">session_item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">path</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the hooks defined in the publisher app’s <code class="docutils literal notranslate"><span class="pre">hooks/</span></code> folder
for additional example implementations.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – A dictionary of configured
<a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> objects for this collector.</p></li>
<li><p><strong>parent_item</strong> – The root <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance to
collect child items for.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="publish-plugin">
<span id="id1"></span><h2>Publish Plugin<a class="headerlink" href="#publish-plugin" title="Permalink to this heading"></a></h2>
<p>Publish plugins are hooks that handle processing of collected publish items.
After all items have been collected, the Publisher attempts to match the items
with the appropriate publish plugins. All matched plugins show up as child tasks
within the publish item hierarchy.</p>
<p>With <code class="docutils literal notranslate"><span class="pre">v2.0.0</span></code> of the publisher and higher, each plugin can define a custom UI
that allows users to make changes to the publish settings prior to publishing.
See the methods and properties section below for details on how to implement a
custom publish plugin UI.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>For more information on how to take over, subclass, and manage hooks,
see the <a class="reference external" href="https://developers.shotgridsoftware.com/tk-core/core.html#sgtk-hook-docs" title="(in tk-core vv0.21.6)"><span class="xref std std-ref">Hooks</span></a> documentation.</p>
</div>
<hr class="docutils" />
<section id="step-by-step-tutorials">
<h3>Step-by-Step Tutorials<a class="headerlink" href="#step-by-step-tutorials" title="Permalink to this heading"></a></h3>
<p>Listed below are step-by-step tutorials to help you customize your publish
workflows using publish plugins. See <a class="reference internal" href="api.html#publish-api"><span class="std std-ref">Publish API</span></a> reference for more
technical details of the Publish Plugin.</p>
<section id="create-a-publish-plugin">
<h4>Create a Publish Plugin<a class="headerlink" href="#create-a-publish-plugin" title="Permalink to this heading"></a></h4>
<p>This tutorial will guide you through the process of creating a new publish
plugin to create a new Version in Flow Production Tracking from a Playblast file
in Maya, and customizing your Toolkit configuration to use this new plugin. This
tutorial will focus on creating and setting up a new publish plugin, and less
about the specifics of Playblasts in Maya (it does not require extensive
knowledge of Maya or Playblasts, only if you want to test out this change you
would need to know how to create a Playblast in Maya). If you are interested in
creating a new publih plugin for another DCC, you can still follow this
tutorial, but you will need to add the configuration settings under the
appropriate DCC in your Toolkit configuration.</p>
<p>Before you begin, you will need to have the following:</p>
<ul class="simple">
<li><p>A local copy of your Toolkit configuration</p></li>
<li><p>The configuration must be based off the tk-config-default2 configuration</p></li>
</ul>
<p><strong>1. Add a new publish plugin setting to your configuration.</strong></p>
<p>We need to add a new setting to the tk-multi-publish2 app configuration in
order to use our new publish plugin. We will modify the
<code class="docutils literal notranslate"><span class="pre">tk-config-default2/env/includes/settings/tk-multi-publish2.yml</span></code> file to add a
new entry under the <code class="docutils literal notranslate"><span class="pre">settings.tk-multi-publish2.maya.asset_step</span></code> publish_plugins
list called “Create Version from Playblast”:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="c1"># ---- Maya</span>

<span class="c1"># asset step</span>
<span class="nt">settings.tk-multi-publish2.maya.asset_step</span><span class="p">:</span>
<span class="nt">collector</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;{self}/collector.py:{engine}/tk-multi-publish2/basic/collector.py&quot;</span>
<span class="nt">collector_settings</span><span class="p">:</span>
<span class="w">    </span><span class="nt">Work Template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">maya_asset_work</span>
<span class="nt">publish_plugins</span><span class="p">:</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Publish to Flow Production Tracking</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{self}/publish_file.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Upload for review</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{self}/upload_version.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Begin file versioning</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{engine}/tk-multi-publish2/basic/start_version_control.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Publish to Flow Production Tracking</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{self}/publish_file.py:{engine}/tk-multi-publish2/basic/publish_session.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Publish Template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">maya_asset_publish</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Publish to Flow Production Tracking</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{self}/publish_file.py:{engine}/tk-multi-publish2/basic/publish_session_geometry.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span>
<span class="w">        </span><span class="nt">Publish Template</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">asset_alembic_cache</span>
<span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create Version from Playblast</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{self}/upload_version.py:{config}/tk-multi-publish2/basic/upload_version_playblast.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
<span class="nt">help_url</span><span class="p">:</span><span class="w"> </span><span class="nv">*help_url</span>
<span class="nt">location</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;@apps.tk-multi-publish2.location&quot;</span>
</pre></div>
</div>
<p>This is the new entry we added to the configuration:</p>
<div class="highlight-yaml notranslate"><div class="highlight"><pre><span></span><span class="p p-Indicator">-</span><span class="w"> </span><span class="nt">name</span><span class="p">:</span><span class="w"> </span><span class="l l-Scalar l-Scalar-Plain">Create Version from Playblast</span>
<span class="w">    </span><span class="l l-Scalar l-Scalar-Plain">hook</span><span class="p p-Indicator">:</span><span class="w"> </span><span class="s">&quot;{self}/upload_version.py:{config}/tk-multi-publish2/basic/upload_version_playblast.py&quot;</span>
<span class="w">    </span><span class="nt">settings</span><span class="p">:</span><span class="w"> </span><span class="p p-Indicator">{}</span>
</pre></div>
</div>
<p>The publish plugin will have the name “Create Version from Playblast” and will
use the publish plugin defined by the hook
<code class="docutils literal notranslate"><span class="pre">tk-config-default2/hooks/tk-multi-publish2/upload_version_playblast.py</span></code>. The
<code class="docutils literal notranslate"><span class="pre">{config}</span></code> token will be resolved to the path of your Toolkit configuration.</p>
<p>The publish plugin will have the base class of the publish plugin defined in the
tk-multi-publish2 App <code class="docutils literal notranslate"><span class="pre">tk-multi-publish2/hooks//upload_version.py</span></code>. The
<code class="docutils literal notranslate"><span class="pre">{self}</span></code> token will be resolved to the path of the tk-multi-publish2 App.</p>
<p><strong>2. Create the new publish plugin file.</strong></p>
<p>From Step 1, we defined a new publish plugin file in the configuration at the
location <code class="docutils literal notranslate"><span class="pre">tk-config-default2/hooks/tk-multi-publish2</span></code> and named
<code class="docutils literal notranslate"><span class="pre">upload_version_playblast.py</span></code>. So we will now need to create that file, below
is the implementaiton of the new publish plugin file:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="kn">import</span> <span class="nn">sgtk</span>

<span class="n">HookBaseClass</span> <span class="o">=</span> <span class="n">sgtk</span><span class="o">.</span><span class="n">get_hook_baseclass</span><span class="p">()</span>

<span class="k">class</span> <span class="nc">MayaUploadVersionPlayblastPlugin</span><span class="p">(</span><span class="n">HookBaseClass</span><span class="p">):</span>
<span class="w">    </span><span class="sd">&quot;&quot;&quot;Plugin for sending Playblasts to Flow Production Tracking for review.&quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Verbose, multi-line description of what the plugin does. This can</span>
<span class="sd">        contain simple html for formatting.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="s2">&quot;&quot;&quot;</span>
<span class="s2">        Upload the Playblast file to Flow Production Tracking for review.&lt;br&gt;&lt;br&gt;</span>

<span class="s2">        A &lt;b&gt;Version&lt;/b&gt; entry will be created in Flow Production Tracking and</span>
<span class="s2">        a transcoded copy of the file will be attached to it. The Version will be</span>
<span class="s2">        linked to the Published File created for the Playblast.</span>
<span class="s2">        &quot;&quot;&quot;</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Dictionary defining the settings that this plugin expects to recieve</span>
<span class="sd">        through the settings parameter in the accept, validate, publish and</span>
<span class="sd">        finalize methods.</span>

<span class="sd">        A dictionary on the following form::</span>

<span class="sd">            {</span>
<span class="sd">                &quot;Settings Name&quot;: {</span>
<span class="sd">                    &quot;type&quot;: &quot;settings_type&quot;,</span>
<span class="sd">                    &quot;default&quot;: &quot;default_value&quot;,</span>
<span class="sd">                    &quot;description&quot;: &quot;One line description of the setting&quot;</span>
<span class="sd">            }</span>

<span class="sd">        The type string should be one of the data types that toolkit accepts as</span>
<span class="sd">        part of its environment configuration.</span>
<span class="sd">        &quot;&quot;&quot;</span>
        <span class="k">return</span> <span class="p">{</span>
            <span class="s2">&quot;Upload&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Upload content to Flow Production Tracking?&quot;</span><span class="p">,</span>
            <span class="p">},</span>
            <span class="s2">&quot;Link Local File&quot;</span><span class="p">:</span> <span class="p">{</span>
                <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;bool&quot;</span><span class="p">,</span>
                <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">,</span>
                <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;Should the local file be referenced by Flow Production Tracking&quot;</span><span class="p">,</span>
            <span class="p">},</span>
        <span class="p">}</span>

    <span class="nd">@property</span>
    <span class="k">def</span> <span class="nf">item_filters</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        List of item types that this plugin is interested in.</span>

<span class="sd">        Only items matching entries in this list will be presented to the</span>
<span class="sd">        accept() method. Strings can contain glob patters such as *, for example</span>
<span class="sd">        [&quot;maya.*&quot;, &quot;file.maya&quot;]</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">[</span><span class="s2">&quot;file.video&quot;</span><span class="p">]</span>

    <span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Method called by the publisher to determine if an item is of any</span>
<span class="sd">        interest to this plugin. Only items matching the filters defined via the</span>
<span class="sd">        item_filters property will be presented to this method.</span>

<span class="sd">        A publish task will be generated for each item accepted here. Returns a</span>
<span class="sd">        dictionary with the following booleans:</span>

<span class="sd">            - accepted: Indicates if the plugin is interested in this value at</span>
<span class="sd">                all. Required.</span>
<span class="sd">            - enabled: If True, the plugin will be enabled in the UI, otherwise</span>
<span class="sd">                it will be disabled. Optional, True by default.</span>
<span class="sd">            - visible: If True, the plugin will be visible in the UI, otherwise</span>
<span class="sd">                it will be hidden. Optional, True by default.</span>
<span class="sd">            - checked: If True, the plugin will be checked in the UI, otherwise</span>
<span class="sd">                it will be unchecked. Optional, True by default.</span>

<span class="sd">        :param settings: Dictionary of Settings. The keys are strings, matching</span>
<span class="sd">            the keys returned in the settings property. The values are `Setting`</span>
<span class="sd">            instances.</span>
<span class="sd">        :param item: Item to process</span>

<span class="sd">        :returns: dictionary with boolean keys accepted, required and enabled</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;accepted&quot;</span><span class="p">:</span> <span class="kc">True</span><span class="p">}</span>

    <span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Validates the given item to check that it is ok to publish.</span>

<span class="sd">        Returns a boolean to indicate validity.</span>

<span class="sd">        :param settings: Dictionary of Settings. The keys are strings, matching</span>
<span class="sd">            the keys returned in the settings property. The values are `Setting`</span>
<span class="sd">            instances.</span>
<span class="sd">        :param item: Item to process</span>

<span class="sd">        :returns: True if item is valid, False otherwise.</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="n">path</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s2">&quot;path&quot;</span><span class="p">)</span>
        <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
            <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">error</span><span class="p">(</span><span class="s2">&quot;Missing Playblast file path.&quot;</span><span class="p">)</span>
            <span class="k">return</span> <span class="kc">False</span>
        <span class="k">return</span> <span class="kc">True</span>

    <span class="k">def</span> <span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>
<span class="w">        </span><span class="sd">&quot;&quot;&quot;</span>
<span class="sd">        Executes the publish logic for the given item and settings.</span>

<span class="sd">        :param settings: Dictionary of Settings. The keys are strings, matching</span>
<span class="sd">            the keys returned in the settings property. The values are `Setting`</span>
<span class="sd">            instances.</span>
<span class="sd">        :param item: Item to process</span>
<span class="sd">        &quot;&quot;&quot;</span>

        <span class="c1"># Set the publish name property for the UploadVersionPlugin to consume</span>
        <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;publish_name&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">get_property</span><span class="p">(</span><span class="s2">&quot;sg_publish_data&quot;</span><span class="p">,</span> <span class="p">{})</span><span class="o">.</span><span class="n">get</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

        <span class="nb">super</span><span class="p">(</span><span class="n">MayaUploadVersionPlayblastPlugin</span><span class="p">,</span> <span class="bp">self</span><span class="p">)</span><span class="o">.</span><span class="n">publish</span><span class="p">(</span><span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">)</span>
</pre></div>
</div>
<p>Breaking down this publish plugin:</p>
<ul class="simple">
<li><p>The <code class="docutils literal notranslate"><span class="pre">description</span></code> property provides a verbose description of what the plugin
does. This description will be displayed in the UI when the plugin is selected.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">settings</span></code> property defines the settings that the plugin expects to
receive. The settings are used to help guide the publish plugin execution.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">item_filters</span></code> property defines the item types that the plugin is
interested in. Only items matching the filters defined here will be presented
to the plugin. For example, we know that Playblast files are video files, so
we set the item filter to <code class="docutils literal notranslate"><span class="pre">file.video</span></code>.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">accept</span></code> method is called by the publisher to determine if an item is of
interest to the plugin. A plugin will only show up in the publisher if it is
accepted.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">validate</span></code> method validates the item to check if it is ok to publish. A
publish plugin will not execute its publish method if it is does not pass the
validation.</p></li>
<li><p>The <code class="docutils literal notranslate"><span class="pre">publish</span></code> method executes the publish logic for the given item and settings.
In our case, the publish method will create a new Version in Flow Production
Tracking and attach the Playblast file to it.</p></li>
</ul>
<p>See the <a class="reference internal" href="api.html#publish-api"><span class="std std-ref">Publish API</span></a> reference for more information on how to extend the
MayaUploadVersionPlayblastPlugin class.</p>
<p><strong>3. Run Maya with your modified configuration.</strong></p>
<p>Now that you have created the new publish plugin and added it to your
configuration, you can run Maya with your modified configuration. When you run
the Publisher, you should see the new “Create Version from Playblast” plugin:</p>
<img alt="_images/tutorial_create_plugin_upload_version_playblast.png" src="_images/tutorial_create_plugin_upload_version_playblast.png" />
</section>
</section>
<section id="publish-plugin-api">
<h3>Publish Plugin API<a class="headerlink" href="#publish-plugin-api" title="Permalink to this heading"></a></h3>
<dl class="py class">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tk_multi_publish2.base_hooks.</span></span><span class="sig-name descname"><span class="pre">PublishPlugin</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://developers.shotgridsoftware.com/tk-core/core.html#sgtk.Hook" title="(in tk-core vv0.21.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hook</span></code></a></p>
<p>This class defines the required interface for a publish plugin. Publish
plugins are responsible for operating on items collected by the collector
plugin. Publish plugins define which items they will operate on as well as
the execution logic for each phase of the publish process.</p>
<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.id">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">id</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.id" title="Permalink to this definition"></a></dt>
<dd><p>Unique string identifying this plugin.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.icon">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">icon</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.icon" title="Permalink to this definition"></a></dt>
<dd><p>The path to an icon on disk that is representative of this plugin
(<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>).</p>
<p>The icon will be displayed on the left side of the task driven by this
plugin, as shown in the image below.</p>
<img alt="_images/task_icon.png" src="_images/task_icon.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>Icons can be stored within the same bundle as the plugin itself and
referenced relative to the disk location of the plugin, accessible via
<code class="xref py py-meth docutils literal notranslate"><span class="pre">sgtk.Hook.disk_location()</span></code>.</p>
<p>Example implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">icon</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="n">os</span><span class="o">.</span><span class="n">path</span><span class="o">.</span><span class="n">join</span><span class="p">(</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">disk_location</span><span class="p">,</span>
        <span class="s2">&quot;icons&quot;</span><span class="p">,</span>
        <span class="s2">&quot;publish.png&quot;</span>
    <span class="p">)</span>
</pre></div>
</div>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>Publish plugins drive the tasks that operate on publish items.
It can be helpful to think of items as “things” and tasks as the
“actions” that operate on those “things”. A publish icon that
represents some type of action can help artists understand the
distinction between items and tasks in the interface.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.name">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">name</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.name" title="Permalink to this definition"></a></dt>
<dd><p>The general name for this plugin (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>).</p>
<p>This value is not generally used for display. Instances of the plugin
are defined within the app’s configuration and those instance names are
what is shown in the interface for the tasks.</p>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.description">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">description</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.description" title="Permalink to this definition"></a></dt>
<dd><p>Verbose, multi-line description of what the plugin does (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a>).</p>
<p>The string can contain html for formatting for display in the UI (any
html tags supported by Qt’s rich text engine).</p>
<p>The description is displayed via the plugin’s default
<a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.create_settings_widget" title="tk_multi_publish2.base_hooks.PublishPlugin.create_settings_widget"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_settings_widget()</span></code></a> implementation, as shown in the image
below:</p>
<img alt="_images/plugin_description.png" src="_images/plugin_description.png" />
<div class="line-block">
<div class="line"><br /></div>
</div>
<p>A simple implementation example:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">description</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>

    <span class="k">return</span> <span class="s1">&#39;&#39;&#39;</span>
<span class="s1">    Creates a publish in Shotgun.</span>

<span class="s1">    A &lt;b&gt;Publish&lt;/b&gt; entry will be created in Shotgun which will</span>
<span class="s1">    include a reference to the file&#39;s path on disk. Other users will</span>
<span class="s1">    be able to access the published file via the</span>
<span class="s1">    &lt;b&gt;&lt;a href=&#39;</span><span class="si">%s</span><span class="s1">&#39;&gt;Loader&lt;/a&gt;&lt;/b&gt; so long as they have access to</span>
<span class="s1">    the file&#39;s location on disk.</span>
<span class="s1">    &#39;&#39;&#39;</span> <span class="o">%</span> <span class="p">(</span><span class="n">loader_url</span><span class="p">,)</span>
</pre></div>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.settings">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">settings</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.settings" title="Permalink to this definition"></a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> defining the configuration interface for this plugin.</p>
<p>The dictionary can include any number of settings required by the
plugin, and takes the form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="o">&lt;</span><span class="n">setting_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">default</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="p">},</span>
    <span class="o">&lt;</span><span class="n">setting_name</span><span class="o">&gt;</span><span class="p">:</span> <span class="p">{</span>
        <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">type</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">default</span><span class="o">&gt;</span><span class="p">,</span>
        <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="n">description</span><span class="o">&gt;</span>
    <span class="p">},</span>
    <span class="o">...</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The keys in the dictionary represent the names of the settings. The
values are a dictionary comprised of 3 additional key/value pairs.</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">type</span></code>: The type of the setting. This should correspond to one of
the data types that toolkit accepts for app and engine settings such
as <code class="docutils literal notranslate"><span class="pre">hook</span></code>, <code class="docutils literal notranslate"><span class="pre">template</span></code>, <code class="docutils literal notranslate"><span class="pre">string</span></code>, etc.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">default</span></code>: The default value for the settings. This can be <code class="docutils literal notranslate"><span class="pre">None</span></code>.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">description</span></code>: A description of the setting as a string.</p></li>
</ul>
<p>Example implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="nd">@property</span>
<span class="k">def</span> <span class="nf">settings</span><span class="p">(</span><span class="bp">self</span><span class="p">):</span>
    <span class="k">return</span> <span class="p">{</span>
        <span class="s2">&quot;Publish Template&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;template&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="kc">None</span><span class="p">,</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The output path template for this plugin.&quot;</span>
        <span class="p">},</span>
        <span class="s2">&quot;Resolution&quot;</span><span class="p">:</span> <span class="p">{</span>
            <span class="s2">&quot;type&quot;</span><span class="p">:</span> <span class="s2">&quot;str&quot;</span><span class="p">,</span>
            <span class="s2">&quot;default&quot;</span><span class="p">:</span> <span class="s2">&quot;1920x1080&quot;</span>
            <span class="s2">&quot;description&quot;</span><span class="p">:</span> <span class="s2">&quot;The output resolution to export before publishing.&quot;</span>
        <span class="p">}</span>
    <span class="p">}</span>
</pre></div>
</div>
<p>The settings are exposed via the <code class="docutils literal notranslate"><span class="pre">settings</span></code> key as the plugins are
configured via the <code class="docutils literal notranslate"><span class="pre">publish_plugins</span></code> setting in the app’s
configuration. Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">publish_plugins</span><span class="p">:</span>
    <span class="o">-</span> <span class="n">name</span><span class="p">:</span> <span class="n">Export</span> <span class="ow">and</span> <span class="n">Publish</span>
      <span class="n">hook</span><span class="p">:</span> <span class="s2">&quot;</span><span class="si">{config}</span><span class="s2">/export_and_publish.py&quot;</span>
      <span class="n">settings</span><span class="p">:</span>
          <span class="n">Publish</span> <span class="n">Template</span><span class="p">:</span> <span class="n">export_template</span>
          <span class="n">Resolution</span><span class="p">:</span> <span class="mi">2048</span><span class="n">x1556</span>
</pre></div>
</div>
<p>The values configured for the plugin will be supplied via settings
parameter in the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.accept" title="tk_multi_publish2.base_hooks.PublishPlugin.accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">accept()</span></code></a>, <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.validate" title="tk_multi_publish2.base_hooks.PublishPlugin.validate"><code class="xref py py-meth docutils literal notranslate"><span class="pre">validate()</span></code></a>, <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.publish" title="tk_multi_publish2.base_hooks.PublishPlugin.publish"><code class="xref py py-meth docutils literal notranslate"><span class="pre">publish()</span></code></a>, and
<a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.finalize" title="tk_multi_publish2.base_hooks.PublishPlugin.finalize"><code class="xref py py-meth docutils literal notranslate"><span class="pre">finalize()</span></code></a> methods.</p>
<p>The values also drive the custom UI defined by the plugin which allows
artists to manipulate the settings at runtime. See the
<a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.create_settings_widget" title="tk_multi_publish2.base_hooks.PublishPlugin.create_settings_widget"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_settings_widget()</span></code></a>, <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.set_ui_settings" title="tk_multi_publish2.base_hooks.PublishPlugin.set_ui_settings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">set_ui_settings()</span></code></a>, and
<a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.get_ui_settings" title="tk_multi_publish2.base_hooks.PublishPlugin.get_ui_settings"><code class="xref py py-meth docutils literal notranslate"><span class="pre">get_ui_settings()</span></code></a> for additional information.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>See the hooks defined in the publisher app’s <code class="docutils literal notranslate"><span class="pre">hooks/</span></code> folder
for additional example implementations.</p>
</div>
</dd></dl>

<dl class="py property">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.item_filters">
<em class="property"><span class="pre">property</span><span class="w"> </span></em><span class="sig-name descname"><span class="pre">item_filters</span></span><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.item_filters" title="Permalink to this definition"></a></dt>
<dd><p>A <a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#list" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">list</span></code></a> of item type wildcard <a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#str" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">str</span></code></a> objects that this
plugin is interested in.</p>
<p>As items are collected by the collector hook, they are given an item
type string (see <a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.create_item" title="tk_multi_publish2.api.PublishItem.create_item"><code class="xref py py-meth docutils literal notranslate"><span class="pre">create_item()</span></code></a>). The strings
provided by this property will be compared to each collected item’s
type.</p>
<p>Only items with types matching entries in this list will be considered
by the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.accept" title="tk_multi_publish2.base_hooks.PublishPlugin.accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">accept()</span></code></a> method. As such, this method makes it possible to
quickly identify which items the plugin may be interested in. Any
sophisticated acceptance logic is deferred to the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.accept" title="tk_multi_publish2.base_hooks.PublishPlugin.accept"><code class="xref py py-meth docutils literal notranslate"><span class="pre">accept()</span></code></a> method.</p>
<p>Strings can contain glob patters such as <code class="docutils literal notranslate"><span class="pre">*</span></code>, for example <code class="docutils literal notranslate"><span class="pre">[&quot;maya.*&quot;,</span>
<span class="pre">&quot;file.maya&quot;]</span></code>.</p>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.accept">
<span class="sig-name descname"><span class="pre">accept</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.accept"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.accept" title="Permalink to this definition"></a></dt>
<dd><p>This method is called by the publisher to see if the plugin accepts the
supplied item for processing.</p>
<p>Only items matching the filters defined via the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.item_filters" title="tk_multi_publish2.base_hooks.PublishPlugin.item_filters"><code class="xref py py-data docutils literal notranslate"><span class="pre">item_filters</span></code></a>
property will be presented to this method.</p>
<p>A publish task will be generated for each item accepted here.</p>
<p>This method returns a <a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> of the following form:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
    <span class="s2">&quot;accepted&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;enabled&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;visible&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">,</span>
    <span class="s2">&quot;checked&quot;</span><span class="p">:</span> <span class="o">&lt;</span><span class="nb">bool</span><span class="o">&gt;</span><span class="p">,</span>
<span class="p">}</span>
</pre></div>
</div>
<p>The keys correspond to the acceptance state of the supplied item. Not
all keys are required. The keys are defined as follows:</p>
<ul class="simple">
<li><p><code class="docutils literal notranslate"><span class="pre">accepted</span></code>: Indicates if the plugin is interested in this value at all.
If <code class="docutils literal notranslate"><span class="pre">False</span></code>, no task will be created for this plugin. Required.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">enabled</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the created task will be enabled in the UI,
otherwise it will be disabled (no interaction allowed). Optional,
<code class="docutils literal notranslate"><span class="pre">True</span></code> by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">visible</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the created task will be visible in the UI,
otherwise it will be hidden. Optional, <code class="docutils literal notranslate"><span class="pre">True</span></code> by default.</p></li>
<li><p><code class="docutils literal notranslate"><span class="pre">checked</span></code>: If <code class="docutils literal notranslate"><span class="pre">True</span></code>, the created task will be checked in the UI,
otherwise it will be unchecked. Optional, <code class="docutils literal notranslate"><span class="pre">True</span></code> by default.</p></li>
</ul>
<p>In addition to the item, the configured settings for this plugin are
supplied. The information provided by each of these arguments can be
used to decide whether to accept the item.</p>
<p>For example, the item’s <code class="docutils literal notranslate"><span class="pre">properties</span></code> <a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><code class="xref py py-class docutils literal notranslate"><span class="pre">dict</span></code></a> may house meta data
about the item, populated during collection. This data can be used to
inform the acceptance logic.</p>
<p>Example implementation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">accept</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

    <span class="n">accept</span> <span class="o">=</span> <span class="kc">True</span>

    <span class="c1"># get the path for the item as set during collection</span>
    <span class="n">path</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>

    <span class="c1"># ensure the file is not too big</span>
    <span class="n">size_in_bytes</span> <span class="o">=</span> <span class="n">os</span><span class="o">.</span><span class="n">stat</span><span class="p">(</span><span class="n">path</span><span class="p">)</span><span class="o">.</span><span class="n">st_stize</span>
    <span class="k">if</span> <span class="n">size_in_bytes</span> <span class="o">&gt;</span> <span class="n">math</span><span class="o">.</span><span class="n">pow</span><span class="p">(</span><span class="mi">10</span><span class="p">,</span> <span class="mi">9</span><span class="p">):</span> <span class="c1"># 1 GB</span>
        <span class="bp">self</span><span class="o">.</span><span class="n">logger</span><span class="o">.</span><span class="n">warning</span><span class="p">(</span><span class="s2">&quot;File is too big (&gt; 1 GB)!&quot;</span><span class="p">)</span>
        <span class="n">accept</span> <span class="o">=</span> <span class="kc">False</span>

    <span class="k">return</span> <span class="p">{</span><span class="s2">&quot;accepted&quot;</span><span class="p">:</span> <span class="n">accepted</span><span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – The keys are strings, matching the keys returned
in the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.settings" title="tk_multi_publish2.base_hooks.PublishPlugin.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a> property. The values are
<a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> instances.</p></li>
<li><p><strong>item</strong> – The <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance to process for
acceptance.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>dictionary with boolean keys accepted, required and enabled</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.validate">
<span class="sig-name descname"><span class="pre">validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.validate" title="Permalink to this definition"></a></dt>
<dd><p>Validates the given item, ensuring it is ok to publish.</p>
<p>Returns a boolean to indicate whether the item is ready to publish.
Returning <code class="docutils literal notranslate"><span class="pre">True</span></code> will indicate that the item is ready to publish. If
<code class="docutils literal notranslate"><span class="pre">False</span></code> is returned, the publisher will disallow publishing of the
item.</p>
<p>An exception can also be raised to indicate validation failed.
When an exception is raised, the error message will be displayed as a
tooltip on the task as well as in the logging view of the publisher.</p>
<p>Simple implementation example for a Maya session item validation:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

     <span class="n">path</span> <span class="o">=</span> <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">query</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">sn</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

     <span class="c1"># ensure the file has been saved</span>
     <span class="k">if</span> <span class="ow">not</span> <span class="n">path</span><span class="p">:</span>
        <span class="k">raise</span> <span class="ne">Exception</span><span class="p">(</span><span class="s2">&quot;The Maya session has not been saved.&quot;</span><span class="p">)</span>

     <span class="k">return</span> <span class="kc">True</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – The keys are strings, matching the keys returned
in the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.settings" title="tk_multi_publish2.base_hooks.PublishPlugin.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a> property. The values are
<a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> instances.</p></li>
<li><p><strong>item</strong> – The <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance to validate.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>True if item is valid, False otherwise.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.publish">
<span class="sig-name descname"><span class="pre">publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.publish" title="Permalink to this definition"></a></dt>
<dd><p>Executes the publish logic for the given item and settings.</p>
<p>Any raised exceptions will indicate that the publish pass has failed and
the publisher will stop execution.</p>
<p>Simple implementation example for a Maya session item publish:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">publish</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>

    <span class="c1"># ensure the session is saved</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">rename</span><span class="o">=</span><span class="n">path</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>

    <span class="c1"># the hook&#39;s parent is the publisher</span>
    <span class="n">publisher</span> <span class="o">=</span> <span class="bp">self</span><span class="o">.</span><span class="n">parent</span>

    <span class="c1"># get the publish info</span>
    <span class="n">publish_version</span> <span class="o">=</span> <span class="n">publisher</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">get_version_number</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>
    <span class="n">publish_name</span> <span class="o">=</span> <span class="n">publisher</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">get_publish_name</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># register the publish and pack the publish info into the item&#39;s</span>
    <span class="c1"># properties dict</span>
    <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;sg_publish_data&quot;</span><span class="p">]</span> <span class="o">=</span> <span class="n">sgtk</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">register_publish</span><span class="p">(</span>
        <span class="s2">&quot;tk&quot;</span><span class="p">:</span> <span class="n">publisher</span><span class="o">.</span><span class="n">sgtk</span><span class="p">,</span>
        <span class="s2">&quot;context&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">context</span><span class="p">,</span>
        <span class="s2">&quot;comment&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">description</span><span class="p">,</span>
        <span class="s2">&quot;path&quot;</span><span class="p">:</span> <span class="n">path</span><span class="p">,</span>
        <span class="s2">&quot;name&quot;</span><span class="p">:</span> <span class="n">publish_name</span><span class="p">,</span>
        <span class="s2">&quot;version_number&quot;</span><span class="p">:</span> <span class="n">publish_version</span><span class="p">,</span>
        <span class="s2">&quot;thumbnail_path&quot;</span><span class="p">:</span> <span class="n">item</span><span class="o">.</span><span class="n">get_thumbnail_as_path</span><span class="p">(),</span>
        <span class="s2">&quot;published_file_type&quot;</span><span class="p">:</span> <span class="s2">&quot;Maya Scene&quot;</span><span class="p">,</span>
        <span class="s2">&quot;dependency_paths&quot;</span><span class="p">:</span> <span class="bp">self</span><span class="o">.</span><span class="n">_maya_get_session_dependencies</span><span class="p">()</span>
    <span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – The keys are strings, matching the keys returned
in the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.settings" title="tk_multi_publish2.base_hooks.PublishPlugin.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a> property. The values are
<a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> instances.</p></li>
<li><p><strong>item</strong> – The <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance to publish.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.finalize">
<span class="sig-name descname"><span class="pre">finalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">item</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.finalize" title="Permalink to this definition"></a></dt>
<dd><p>Execute the finalize logic for the given item and settings.</p>
<p>This method can be used to do any type of cleanup or reporting after
publishing is complete.</p>
<p>Any raised exceptions will indicate that the finalize pass has failed
and the publisher will stop execution.</p>
<p>Simple implementation example for a Maya session item finalization:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">finalize</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">settings</span><span class="p">,</span> <span class="n">item</span><span class="p">):</span>

    <span class="n">path</span> <span class="o">=</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="p">[</span><span class="s2">&quot;path&quot;</span><span class="p">]</span>

    <span class="c1"># get the next version of the path</span>
    <span class="n">next_version_path</span> <span class="o">=</span> <span class="n">publisher</span><span class="o">.</span><span class="n">util</span><span class="o">.</span><span class="n">get_next_version_path</span><span class="p">(</span><span class="n">path</span><span class="p">)</span>

    <span class="c1"># save to the next version path</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">rename</span><span class="o">=</span><span class="n">next_version_path</span><span class="p">)</span>
    <span class="n">cmds</span><span class="o">.</span><span class="n">file</span><span class="p">(</span><span class="n">save</span><span class="o">=</span><span class="kc">True</span><span class="p">,</span> <span class="n">force</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>settings</strong> (<a class="reference external" href="https://docs.python.org/3.9/library/stdtypes.html#dict" title="(in Python v3.9)"><em>dict</em></a>) – The keys are strings, matching the keys returned
in the <a class="reference internal" href="#tk_multi_publish2.base_hooks.PublishPlugin.settings" title="tk_multi_publish2.base_hooks.PublishPlugin.settings"><code class="xref py py-data docutils literal notranslate"><span class="pre">settings</span></code></a> property. The values are
<a class="reference internal" href="api.html#publish-api-setting"><span class="std std-ref">PluginSetting</span></a> instances.</p></li>
<li><p><strong>item</strong> – The <a class="reference internal" href="api.html#publish-api-item"><span class="std std-ref">PublishItem</span></a> instance to finalize.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.create_settings_widget">
<span class="sig-name descname"><span class="pre">create_settings_widget</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.create_settings_widget"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.create_settings_widget" title="Permalink to this definition"></a></dt>
<dd><p>Creates a Qt widget, for the supplied parent widget (a container widget
on the right side of the publish UI).</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>parent</strong> – The parent to use for the widget being created.</p></li>
<li><p><strong>items</strong> – A list of PublishItems the selected publish tasks are parented to.</p></li>
</ul>
</dd>
<dt class="field-even">Returns<span class="colon">:</span></dt>
<dd class="field-even"><p>A QtGui.QWidget or subclass that displays information about
the plugin and/or editable widgets for modifying the plugin’s
settings.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.get_ui_settings">
<span class="sig-name descname"><span class="pre">get_ui_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.get_ui_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.get_ui_settings" title="Permalink to this definition"></a></dt>
<dd><p>Invoked by the Publisher when the selection changes. This method gathers the settings
on the previously selected task, so that they can be later used to repopulate the
custom UI if the task gets selected again. They will also be passed to the accept, validate,
publish and finalize methods, so that the settings can be used to drive the publish process.</p>
<p>The widget argument is the widget that was previously created by
<cite>create_settings_widget</cite>.</p>
<p>The method returns a dictionary, where the key is the name of a
setting that should be updated and the value is the new value of that
setting. Note that it is up to you how you want to store the UI’s state as
settings and you don’t have to necessarily to return all the values from
the UI. This is to allow the publisher to update a subset of settings
when multiple tasks have been selected.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="p">{</span>
     <span class="s2">&quot;setting_a&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/a/file&quot;</span>
<span class="p">}</span>
</pre></div>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>widget</strong> – The widget that was created by <cite>create_settings_widget</cite></p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PublishPlugin.set_ui_settings">
<span class="sig-name descname"><span class="pre">set_ui_settings</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">widget</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">settings</span></span></em>, <em class="sig-param"><span class="n"><span class="pre">items</span></span><span class="o"><span class="pre">=</span></span><span class="default_value"><span class="pre">None</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/publish_plugin.html#PublishPlugin.set_ui_settings"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PublishPlugin.set_ui_settings" title="Permalink to this definition"></a></dt>
<dd><p>Allows the custom UI to populate its fields with the settings from the
currently selected tasks.</p>
<p>The widget is the widget created and returned by
<cite>create_settings_widget</cite>.</p>
<p>A list of settings dictionaries are supplied representing the current
values of the settings for selected tasks. The settings dictionaries
correspond to the dictionaries returned by the settings property of the
hook.</p>
<p>Example:</p>
<div class="highlight-default notranslate"><div class="highlight"><pre><span></span><span class="n">settings</span> <span class="o">=</span> <span class="p">[</span>
<span class="p">{</span>
     <span class="s2">&quot;seeting_a&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/a/file&quot;</span>
     <span class="s2">&quot;setting_b&quot;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">},</span>
<span class="p">{</span>
     <span class="s2">&quot;setting_a&quot;</span><span class="p">:</span> <span class="s2">&quot;/path/to/a/file&quot;</span>
     <span class="s2">&quot;setting_b&quot;</span><span class="p">:</span> <span class="kc">False</span>
<span class="p">}]</span>
</pre></div>
</div>
<p>The default values for the settings will be the ones specified in the
environment file. Each task has its own copy of the settings.</p>
<p>When invoked with multiple settings dictionaries, it is the
responsibility of the custom UI to decide how to display the
information. If you do not wish to implement the editing of multiple
tasks at the same time, you can raise a <code class="docutils literal notranslate"><span class="pre">NotImplementedError</span></code> when
there is more than one item in the list and the publisher will inform
the user than only one task of that type can be edited at a time.</p>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><ul class="simple">
<li><p><strong>widget</strong> – The widget that was created by <cite>create_settings_widget</cite>.</p></li>
<li><p><strong>settings</strong> – a list of dictionaries of settings for each selected
task.</p></li>
<li><p><strong>items</strong> – A list of PublishItems the selected publish tasks are parented to.</p></li>
</ul>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>
<section id="post-phase-hook">
<h2>Post Phase Hook<a class="headerlink" href="#post-phase-hook" title="Permalink to this heading"></a></h2>
<dl class="py class">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PostPhaseHook">
<em class="property"><span class="pre">class</span><span class="w"> </span></em><span class="sig-prename descclassname"><span class="pre">tk_multi_publish2.base_hooks.</span></span><span class="sig-name descname"><span class="pre">PostPhaseHook</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">parent</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/post_phase.html#PostPhaseHook"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PostPhaseHook" title="Permalink to this definition"></a></dt>
<dd><p>Bases: <a class="reference external" href="https://developers.shotgridsoftware.com/tk-core/core.html#sgtk.Hook" title="(in tk-core vv0.21.6)"><code class="xref py py-class docutils literal notranslate"><span class="pre">Hook</span></code></a></p>
<p>This hook defines methods that are executed after each phase of a publish:
validation, publish, and finalization. Each method receives the
<a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> tree instance being used by the publisher, giving
full control to further curate the publish tree including the publish items
and the tasks attached to them. See the <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a>
documentation for additional details on how to traverse the tree and
manipulate it.</p>
<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PostPhaseHook.post_validate">
<span class="sig-name descname"><span class="pre">post_validate</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">publish_tree</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/post_phase.html#PostPhaseHook.post_validate"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PostPhaseHook.post_validate" title="Permalink to this definition"></a></dt>
<dd><p>This method is executed after the validation pass has completed for each
item in the tree, before the publish pass.</p>
<p>A <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> instance representing the items to publish,
and their associated tasks, is supplied as an argument. The tree can be
traversed in this method to inspect the items and tasks and process them
collectively. The instance can also be used to save the state of the
tree to disk for execution later or on another machine.</p>
<p>To glean information about the validation of particular items, you can
iterate over the items in the tree and introspect their
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.properties" title="tk_multi_publish2.api.PublishItem.properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">properties</span></code></a> dictionary. This requires
customizing your publish plugins to populate any specific validation
information (failure/success) as well. You might, for example, set a
<code class="docutils literal notranslate"><span class="pre">validation_failed</span></code> boolean in the item properties, indicating if any
of the item’s tasks failed. You could then include validation error
messages in a <code class="docutils literal notranslate"><span class="pre">validation_errors</span></code> list on the item, appending error
messages during task execution. Then, this method might look something
like this:</p>
<div class="highlight-python notranslate"><div class="highlight"><pre><span></span><span class="k">def</span> <span class="nf">post_validate</span><span class="p">(</span><span class="bp">self</span><span class="p">,</span> <span class="n">publish_tree</span><span class="p">):</span>

    <span class="n">all_errors</span> <span class="o">=</span> <span class="p">[]</span>

    <span class="c1"># the publish tree is iterable, so you can easily loop over</span>
    <span class="c1"># all items in the tree</span>
    <span class="k">for</span> <span class="n">item</span> <span class="ow">in</span> <span class="n">publish_tree</span><span class="p">:</span>

        <span class="c1"># access properties set on the item during the execution of</span>
        <span class="c1"># the attached publish plugins</span>
        <span class="k">if</span> <span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">validation_failed</span><span class="p">:</span>
            <span class="n">all_errors</span><span class="o">.</span><span class="n">extend</span><span class="p">(</span><span class="n">item</span><span class="o">.</span><span class="n">properties</span><span class="o">.</span><span class="n">validation_errors</span><span class="p">)</span>

    <span class="c1"># process all validation issues here...</span>
</pre></div>
</div>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will not be able to use the item’s
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.local_properties" title="tk_multi_publish2.api.PublishItem.local_properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_properties</span></code></a> in this hook since
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.local_properties" title="tk_multi_publish2.api.PublishItem.local_properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_properties</span></code></a> are only accessible
during the execution of a publish plugin.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>publish_tree</strong> – The <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> instance representing
the items to be published.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PostPhaseHook.post_publish">
<span class="sig-name descname"><span class="pre">post_publish</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">publish_tree</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/post_phase.html#PostPhaseHook.post_publish"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PostPhaseHook.post_publish" title="Permalink to this definition"></a></dt>
<dd><p>This method is executed after the publish pass has completed for each
item in the tree, before the finalize pass.</p>
<p>A <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> instance representing the items that were
published is supplied as an argument. The tree can be traversed in this
method to inspect the items and process them collectively.</p>
<p>To glean information about the publish state of particular items, you
can iterate over the items in the tree and introspect their
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.properties" title="tk_multi_publish2.api.PublishItem.properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">properties</span></code></a> dictionary. This requires
customizing your publish plugins to populate any specific publish
information that you want to process collectively here.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will not be able to use the item’s
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.local_properties" title="tk_multi_publish2.api.PublishItem.local_properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_properties</span></code></a> in this hook since
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.local_properties" title="tk_multi_publish2.api.PublishItem.local_properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_properties</span></code></a> are only accessible
during the execution of a publish plugin.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>publish_tree</strong> – The <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> instance representing
the items to be published.</p>
</dd>
</dl>
</dd></dl>

<dl class="py method">
<dt class="sig sig-object py" id="tk_multi_publish2.base_hooks.PostPhaseHook.post_finalize">
<span class="sig-name descname"><span class="pre">post_finalize</span></span><span class="sig-paren">(</span><em class="sig-param"><span class="n"><span class="pre">publish_tree</span></span></em><span class="sig-paren">)</span><a class="reference internal" href="_modules/tk_multi_publish2/base_hooks/post_phase.html#PostPhaseHook.post_finalize"><span class="viewcode-link"><span class="pre">[source]</span></span></a><a class="headerlink" href="#tk_multi_publish2.base_hooks.PostPhaseHook.post_finalize" title="Permalink to this definition"></a></dt>
<dd><p>This method is executed after the finalize pass has completed for each
item in the tree.</p>
<p>A <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> instance representing the items that were
published and finalized is supplied as an argument. The tree can be
traversed in this method to inspect the items and process them
collectively.</p>
<p>To glean information about the finalize state of particular items, you
can iterate over the items in the tree and introspect their
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.properties" title="tk_multi_publish2.api.PublishItem.properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">properties</span></code></a> dictionary. This requires
customizing your publish plugins to populate any specific finalize
information that you want to process collectively here.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>You will not be able to use the item’s
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.local_properties" title="tk_multi_publish2.api.PublishItem.local_properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_properties</span></code></a> in this hook since
<a class="reference internal" href="api.html#tk_multi_publish2.api.PublishItem.local_properties" title="tk_multi_publish2.api.PublishItem.local_properties"><code class="xref py py-attr docutils literal notranslate"><span class="pre">local_properties</span></code></a> are only accessible
during the execution of a publish plugin.</p>
</div>
<dl class="field-list simple">
<dt class="field-odd">Parameters<span class="colon">:</span></dt>
<dd class="field-odd"><p><strong>publish_tree</strong> – The <a class="reference internal" href="api.html#publish-api-tree"><span class="std std-ref">PublishTree</span></a> instance representing
the items to be published.</p>
</dd>
</dl>
</dd></dl>

</dd></dl>

</section>
</section>


           </div>
          </div>
          <footer><div class="rst-footer-buttons" role="navigation" aria-label="Footer">
        <a href="index.html" class="btn btn-neutral float-left" title="Flow Production Tracking Publisher API reference, v2.10.0" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left" aria-hidden="true"></span> Previous</a>
        <a href="api.html" class="btn btn-neutral float-right" title="Publish API" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right" aria-hidden="true"></span></a>
    </div>

  <hr/>

  <div role="contentinfo">
    <p>&#169; Copyright 2024, Autodesk.</p>
  </div>

   

</footer>
        </div>
      </div>
    </section>
  </div>
  <script>
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>
 

  <script type="text/javascript">
    window.wafCCPAForceShow = true;
    (function(a,b,c,d){
      a='https://tags.tiqcdn.com/utag/autodesk/micro-basic/prod/utag.js';
      b=document;c='script';d=b.createElement(c);d.src=a;d.type='text/java'+c;d.async=true;
      a=b.getElementsByTagName(c)[0];a.parentNode.insertBefore(d,a);
    })();
  </script>


</body>
</html>